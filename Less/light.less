@light: 1;
@dark: 2;

@theme-color: if((@light<@dark), hsl(0, 100%, 75%), hsl(195, 100%, 50%));
@base-bg: if((@light<@dark), hsl(0, 0%, 100%), hsl(0, 0%, 25%));
@base-text: if((@light<@dark), hsl(0, 0%, 5%), hsl(0, 0%, 75%));

:root {
    --bg-color: @base-bg;
    --write-bg: @base-bg;
    --link-bg: none;
    --mark-bg: @theme-color;
    --code-bg: if((@light<@dark), lighten(@theme-color, 20%), #263238);
    --quota-bg: darken(@base-bg, 3%);
    --codeb-bg: if((@light<@dark), darken(@base-bg, 5%), #263238);
    --thead-bg: darken(@base-bg, 9%);
    --tbody-bg: darken(@base-bg, 7%);

    --title-color: if((@light<@dark), @base-text, lighten(@base-text, 15%));
    --text-color: if((@light<@dark), lighten(@base-text, 15%), @base-text);
    --mark-color: if((@light<@dark), lighten(@base-text, 15%), darken(@base-text, 45%));
    --quota-color: if((@light<@dark), lighten(@base-text, 25%), darken(@base-text, 25%));
    --code-color: if((@light<@dark), lighten(@base-text, 25%), @base-text);
    --codeb-color: if((@light<@dark), lighten(@base-text, 25%), darken(@base-text, 25%));
    --footer-color: if((@light<@dark), lighten(@base-text, 45%), darken(@base-text, 45%));
    --link-color: @theme-color;

    --md-char-color: lighten(@theme-color, 10%);
    --meta-content-color: lighten(@theme-color, 10%);

    --link-hover: lighten(@theme-color, 10%);
    --thead-hover: darken(@base-bg, 1%);
    --tbody-hover: darken(@base-bg, 1%);

    --window-border: 1px solid hsl(0, 0%, 95%);
    --base-border: 1px solid lighten(@theme-color, 10%);
    --base-borderl: 4px solid lighten(@theme-color, 10%);
    --base-borderb: 1px dashed lighten(@theme-color, 10%);
    --opt-borderb: 1px dashed hsl(215, 100%, 65%);

    --base-shadow: 0px 8px 16px hsla(0, 0%, 0%, .2);
    --opt-shadow: 0px 8px 16px 1px hsla(0, 0%, 0%, 0.3);
    --img-shadow: var(--opt-shadow);
    // --code-shadow: var(--base-shadow);
    // --quota-shadow: var(--base-shadow);

    --base-margin: 1rem auto;
    --base-padding: 1px 4px;
    --opt-padding: 1rem;

    /* 字体样式援引自 font.css */
    --base-font: -apple-system, "Poppins", "Noto Sans", "Helvetica Neue", Helvetica, "Nimbus Sans L", Arial, "Liberation Sans", "Noto Sans CJK SC", "PingFang SC", "Hiragino Sans GB", "Source Han Sans SC", "Source Han Sans CN", "Microsoft YaHei", "Wenquanyi Micro Hei", "WenQuanYi Zen Hei", "ST Heiti", SimHei, "WenQuanYi Zen Hei Sharp", sans-serif;

    --title-font: var(--em-font);

    --em-font: "EB Garamond", Georgia, "Nimbus Roman No9 L", "Noto Serif CJK SC", "Songti SC", "Source Han Serif SC", "Source Han Serif CN", STSong, "AR PL New Sung", "AR PL SungtiL GB", NSimSun, SimSun, "TW\-Sung", "WenQuanYi Bitmap Song", "AR PL UMing CN", "AR PL UMing HK", "AR PL UMing TW", "AR PL UMing TW MBE", PMingLiU, MingLiU, serif;

    --quota-font: "EB Garamond", Baskerville, Georgia, "Liberation Serif", "TW-Kai", "Kaiti SC", STKaiti, "AR PL UKai CN", "AR PL UKai HK", "AR PL UKai TW", "AR PL UKai TW MBE", "AR PL KaitiM GB", KaiTi, KaiTi_GB2312, DFKai-SB, "TW\-Kai", curve, serif;

    --monospace: "Cascadia code", "Sarasa Term SC", Monaco, "Deja Vu Sans Mono", Consolas, "Lucida Console", "Andale Mono", Courier;

    --mermaid-alt-font-family: var(--base-font) !important;
    --mermaid-font-family: var(--base-font) !important;
}

*,
:after,
:before {
    box-sizing: border-box;
}

:after,
:before {
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
}

/* 内外边距通常让各个浏览器样式的表现位置不同 */
body,
dl,
dt,
dd,
ul,
ol,
li,
h1,
h2,
h3,
h4,
h5,
h6,
pre,
code,
form,
fieldset,
legend,
input,
textarea,
p,
blockquote,
th,
td,
hr,
button,
article,
aside,
details,
figcaption,
figure,
footer,
header,
menu,
nav,
section {
    margin: 0;
    padding: 0;
}

/* 重设 HTML5 标签, IE 需要在 js 中 createElement(TAG) */
article,
aside,
details,
figcaption,
figure,
footer,
header,
menu,
nav,
section {
    display: block;
}

/* HTML5 媒体文件跟 img 保持一致 */
audio,
canvas,
video {
    display: inline-block;
}

/* 要注意表单元素并不继承父级 font 的问题 */
body,
button,
input,
select,
textarea {
    font: 400 1em/1.75 var(--base-font);
}

button::-moz-focus-inner,
input::-moz-focus-inner {
    padding: 0;
    border: 0;
}

/* 去掉各Table cell 的边距并让其边重合 */
table {
    border-collapse: collapse;
    border-spacing: 0;
}

/* 去除默认边框 */
fieldset,
img {
    border: 0;
}


html {
    -webkit-text-size-adjust: 100%;
    -ms-text-size-adjust: 100%;
    text-rendering: optimizelegibility;
    -webkit-font-smoothing: initial;
}

html,
body,
#write {
    font-family: var(--base-font);
    font-weight: 400;
    font-size: 16px;
    font-size: 1rem;
    line-height: 1.75rem;
    color: var(--text-color);
    text-align: justify;
}

content {
    background: var(--bg-color);
    min-width: 600px;
}

#write {
    background: var(--write-bg);
    max-width: 914px;
    min-width: calc(100vw-45rem);
    min-height: calc(100vh-6rem);
    margin: 2rem auto;
    padding: 4rem;

    h1,
    h2 {
        font-family: var(--title-font);
        font-weight: 800;
        line-height: 3rem;
        text-align: center;
        text-transform: uppercase;
    }

    h1 {
        font-size: 3rem;
        margin: 3rem auto 4rem;

        &:before,
        &:after {
            content: "";
            display: block;
            position: relative;
            width: 50%;
            margin: 1rem auto;
        }

        &:before {
            top: -1.5rem;
            border-top: var(--opt-borderb);
        }

        &:after {
            top: 1.5rem;
            border-top: var(--base-borderb);
        }
    }

    h2 {
        font-size: 2rem;
        margin: 2rem auto 1rem;
    }

    h3,
    h4,
    h5,
    h6 {
        font-family: var(--base-font);
        font-weight: 600;
        margin: 2rem auto 1rem;

        &:before {
            font-size: .9rem;
            vertical-align: middle;
            margin-right: .5rem;
            padding: var(--base-padding);
            border-radius: 5px;
            background: @theme-color;
            color: var(--write-bg);
        }
    }

    h3 {
        font-size: 1.75rem;

        &::before {
            content: "H3";
        }
    }

    h4 {
        font-size: 1.5rem;

        &::before {
            content: "H4";
        }
    }

    h5,
    h6 {
        font-size: 1.25rem;
    }

    h5::before {
        content: "H5";
    }

    h6::before {
        content: "H6";
    }



    // 让所有标题下的元素显示为标题样式
    h1 *,
    h2 *,
    h3 *,
    h4 *,
    h5 *,
    h6 * {
        background: none;
        color: var(--title-color);
        text-decoration: none;
        border: none;
    }

    // 块级元素
    blockquote,
    pre.md-fences,
    pre.md-meta-block,
    figure>table,
    img {
        margin: var(--base-margin);
        border-radius: 5px;
        padding: var(--opt-padding);
    }

    ul,
    ol {
        margin: var(--base-margin);
    }

    p+p {
        margin: 1rem auto;
    }

    // 行内元素
    code,
    mark,
    kbd,
    samp,
    tt,
    var,
    ins {
        margin: 0 4px;
        padding: var(--base-padding);
        border-radius: 5px;
        font-family: var(--monospace);
    }

    // YAML
    pre.md-meta-block {
        min-height: 30px;
        position: sticky;
        margin-top: -1.5rem;
        margin-bottom: 2rem;
    }

    // codeblock
    pre.md-fences {
        display: block;
        -webkit-overflow-scrolling: touch;
        box-shadow: var(--code-shadow);
        white-space: pre;
    }

    pre.md-meta-block,
    pre.md-fences,
    code {
        line-height: 1.5rem;
        font-family: var(--monospace);
        font-size: .9rem;
        font-weight: 300;
        background-color: var(--codeb-bg);
        color: var(--codeb-color);
    }

    // code
    code {
        background-color: var(--code-bg);
        color: var(--code-color);
    }

    // 超链接
    a,
    ins {
        background: var(--link-bg);
        color: var(--link-color);
        text-decoration: none;
        border-bottom: var(--base-borderb);

        &:hover {
            border-bottom-color: var(--link-color);
            color: var(--link-hover);
            text-decoration: none;
        }
    }

    // 强调
    strong,
    em {
        font-family: var(--em-font);
        font-weight: 800;
        color: var(--title-color);
    }

    em {
        border-bottom: var(--opt-borderb);
    }

    mark {
        background: var(--mark-bg);
        color: var(--mark-color);
    }

    //list
    ul,
    ol {
        margin-left: 1.5rem;
    }

    ul {
        list-style: disc;

        ul {
            list-style: circle;
            margin-left: 1rem;
        }
    }

    ol {
        list-style: decimal-leading-zero;

        ol {
            list-style: lower-roman;
            margin-left: 1rem;
        }
    }

    ol ol,
    ul ul,
    ol ul,
    ul ol {
        margin-top: .5rem;
    }

    ul li,
    ol li,
    li ul,
    li ol {
        margin-left: 1rem;
    }

    //blockquote
    blockquote {
        background: var(--quota-bg);
        color: var(--quota-color);
        font-family: var(--quota-font);
        font-size: 1.2rem;
        box-shadow: var(--quota-shadow);

        blockquote {
            padding: 0;
            padding-left: 1rem;
            border-left: var(--base-borderl);
            box-shadow: none;
            border-radius: 0;
        }

        pre.md-fences {
            box-shadow: none;
        }

        p {
            color: var(--quota-color);
            font-family: var(--quota-font);
            line-height: 1.75rem;
        }

        em,
        strong,
        mark {
            font-size: 1rem;
        }
    }

    //img
    img {
        box-shadow: var(--img-shadow);
        padding: 0;

        &[alt="no-shadow"] {
            box-shadow: none !important;
        }

        &[alt="normal"] {
            margin: 0 !important;
            box-shadow: none !important;
        }
    }

    //hr

    hr {
        border: none;
        border-bottom: var(--base-border);
        margin: 3rem auto;
        height: 1px;
        width: 50%;

        .pb {
            page-break-after: always;
            border-bottom: none;
        }
    }

    //table

    figure>table {
        width: 98%;
    }

    table {

        th,
        thead th,
        td {
            padding: .5rem 1rem;
        }

        th,
        thead th {
            background: var(--thead-bg);

            &:hover {
                background: var(--thead-hover);
                color: var(--link-hover);
            }
        }

        caption {
            border-bottom: none;
        }

        td {
            background: var(--tbody-bg);
            color: var(--text-color);
            border: 1px solid var(--thead-bg);

            &:hover {
                background: var(--tbody-hover);
                color: var(--link-hover);
            }
        }
    }

    sup.md-footnote {
        padding: var(--base-padding);
        color: var(--footer-color);
        cursor: pointer;
        font-size: .75rem;
    }
}

//TOC

.md-toc {
    font-size: 1.25rem;
    line-height: 1.5rem;
    display: table;
    margin: 2rem auto;
    margin-left: 4rem !important;
    max-width: 75%;

    &::before {
        content: "目录";
        font-family: var(--base-font);
        font-size: 2rem;
        font-weight: 200;
        text-align: center;
        display: block;
        position: absolute;
        left: -10rem;
        padding: 8rem;
        padding-top: 2rem;
        background: linear-gradient(-40deg, transparent 49.5%, deeppink 49.5%, deeppink 50.5%, transparent 50.5%) 40px;
    }

    .md-toc-content {
        line-height: 2rem;
        left: 4rem;
        top: 1rem;

        .md-toc-item {
            font-family: var(--base-font);
        }

        .md-toc-inner {
            color: var(--text-color) !important;
            border: none !important;
        }

        .md-toc-h1 {
            margin-top: 2rem;
            font-weight: 300;
            font-size: 1.2rem;
            counter-increment: counter_md-toc-h1;
            counter-reset: counter_md-toc-h2;

            &:before {
                content: "第"counter(counter_md-toc-h1, cjk-ideographic)"章";
            }

            .md-toc-inner {
                margin-left: 2em;
            }
        }

        .md-toc-h2,
        .md-toc-h3 {
            margin-top: 1rem;
            font-weight: 200;
        }

        .md-toc-h2+.md-toc-h3 {
            margin-left: 8rem;
        }

        .md-toc-h2 {
            margin-left: 2rem;
            font-size: 1.1rem;
            counter-increment: counter_md-toc-h2;
            counter-reset: counter_md-toc-h3;

            &::before {
                content: "第"counter(counter_md-toc-h2, cjk-ideographic)"节";
            }
        }

        .md-toc-h3 {
            display: inline-block;
            font-size: 1rem;
            counter-increment: counter_md-toc-h3;
            counter-reset: counter_md-toc-h4;

            &::first-of-type {
                margin-left: 4rem;
            }

            &::before {
                content: counter(counter_md-toc-h3);
            }

            &:after {
                content: " / ";
            }

            .md-toc-inner {
                margin-left: .5rem;
            }
        }

        .md-toc-h4,
        .md-toc-h5,
        .md-toc-h6 {
            display: none;
        }
    }
}

.md-toc-h1::before,
.md-toc-h2::before,
.md-toc-h3::before {
    display: inline-block;
    color: var(--text-color);
}

//TODO list
.task-list-item input {
    &:before {
        content: "";
        position: relative;
        top: 0px;
        left: -5px;
        width: 20px;
        height: 20px;
        display: inline-block;
        vertical-align: middle;
        text-align: center;
        border: var(--base-border);
        background-color: var(--write-bg);
        margin-left: 0;
        margin-top: -0.5rem;
        border-radius: 50%;
        -webkit-transition: background-color 200ms ease-in-out;
        transition: background-color 200ms ease-in-out;
    }

    &::after {
        content: "";
        position: absolute;
        top: 3px;
        left: -2px;
        width: 1rem;
        height: 0.5rem;
        border: 2px solid #fff;
        border-top: 0;
        border-right: 0;
        -webkit-transform: rotate(-45deg);
        transform: rotate(-45deg);
        opacity: 0;
        -webkit-transition: opacity 200ms ease-in-out;
        transition: opacity 200ms ease-in-out;
    }

    &:checked {
        &::before {
            background: @theme-color;
            border: none;
        }

        &::after {
            opacity: 1;
        }
    }
}

// fix
//fix
.task-list-item {
    list-style: none;
}

.task-list-item input:checked:before,
.task-list-item input[checked]:before {
    content: " ";
}

blockquote .task-list-item input::before {
    top: -3px;
}

//fix
//fix

.md-task-list-item.task-list-done {
    text-decoration: line-through;
    color: var(--footer-color);
}

//codeblock style

.cm-s-inner .cm-header,
.cm-s-inner.cm-header {
    color: hsl(215, 100%, 75%);
}

@media screen and (max-width:600px) {
    #write {
        padding: 2rem;
        line-height: 1.5rem;

        h1,
        h2 {
            font-size: 1.5rem;
            text-align: left;
        }

        h3,
        h4,
        h5,
        h6 {
            font-size: 1rem;
        }

        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            margin: 1.5rem 0;

            &:before {
                display: inline;
                border: none;
                top: 0;
                margin-right: 1rem;
                background: none;
                color: lighten(@theme-color, 10%);
            }

            &::after {
                border: none;
            }
        }

        h1::before {
            content: "#";
        }

        h2::before {
            content: "##";
        }

        h3::before {
            content: "###";
        }

        p+p {
            margin: 1rem auto;
        }

        pre.md-fences {
            padding: 1rem;
            box-shadow: none;
        }

        blockquote {
            background: var(--quota-bg);
            margin: 1.5rem auto;
            padding: 1.5rem;
            border-radius: 0;
            box-shadow: none;
            border-left: var(--base-borderl);

            blockquote {
                padding-left: 1rem;
            }

            em,
            strong,
            mark {
                font-family: var(--quota-font);
            }
        }
    }
}

@media screen and (max-width:800px) {
    .md-toc {
        padding: 0;
        margin: 0 !important;
        max-width: 100%;

        &::before {
            display: block;
            position: relative;
            left: 0;
            margin-top: 4rem;
            margin-bottom: 0;
            padding: 0;
            background: none;
        }

        .md-toc-content {
            top: 0;
            left: 0;
        }
    }
}

@media screen and (max-width:1000px) {
    footer.ty-footer {
        background: var(--bg-color);
        border-top: 1px solid var(--bg-color);
    }
}

// @media screen and (min-width:1000px) {
//     #write {
//         pre.md-fences {
//             // border-top: 2rem solid hsl(0, 0, 20%);
//             display: block;
//             -webkit-overflow-scrolling: touch;
//             box-shadow: var(--code-shadow);
//         }

//         pre.md-fences:before {
//             content: ' ';
//             background: #fc625d;
//             box-shadow: 23px 0 #fdbc40, 45px 0 #35cd4b;
//             border-radius: 50%;
//             margin-top: -2.8rem;
//             position: absolute;
//             left: 15px;
//             height: 12px;
//             width: 12px;
//         }
//     }
// }

@media screen and (min-width:1300px) {
    #write {
        box-shadow: var(--base-shadow);
        border-radius: 5px;
    }
}

@media print {

    @base-font: "noto serif cjk sc";
    @code-bg: hsl(0, 0%, 95%);

    html,
    body,
    #write {
        border: none;
        font-family: @base-font;
        font-size: 16px;
        font-size: 1rem;
        font-weight: 400;
        line-height: 1.75rem;
    }

    .typora-export * {
        -webkit-print-color-adjust: exact;
    }

    #write {

        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            font-weight: 600;
            margin: 2rem 0 1rem;
            color: #111;
            line-height: 2rem;
            font-family: @base-font;
        }

        h1 {
            font-size: 1.75rem;
        }

        h2 {
            font-size: 1.5rem;
        }

        h3,
        h4,
        h5,
        h6 {
            font-size: 1.25rem;
        }

        p {
            line-height: 1.75rem;
            margin-top: 0;
            margin-bottom: 0;
            text-indent: 2rem;
        }

        blockquote {
            position: relative;
            margin: 1.75rem 2rem;
            background: none;
            color: #555;
            font-weight: 300;

            li {
                font-family: var(--quota-font);
            }

            .task-list-item input::before {
                top: -1px;
            }
        }

        pre.md-fences {
            background: @code-bg;
        }

        figure>table {
            background: none;
            margin: 1.75rem auto;

            tr {
                border-collapse: collapse;
                border-bottom: 1px solid brown;

                th,
                td {
                    padding: .5rem 0;
                }
            }
        }

        code,
        mark {
            padding: 2px;
            background: none;
        }

        mark {
            color: var(--text-color);
            background-color: hsl(60, 100%, 50%);
        }

    }



    //bugfix
    #write {
        box-shadow: none;
        border-radius: 0px;
        margin: 0;
        padding: 0;

        h3:before,
        h4:before,
        h5:before,
        h6:before {
            content: "" !important;
            background: none;
        }

        h1:before,
        h1:after,
        blockquote h1:before,
        blockquote h1:after {
            border: none;
            height: 0;
        }

        p+p {
            margin: 0;
        }

        blockquote,
        pre.md-fences,
        img {
            border: none;
            border-radius: 0;
            box-shadow: none;
        }

        blockquote {
            blockquote {
                border-left: none;
            }
        }

        mark {
            font-family: @base-font;
        }

        table {

            thead th,
            th,
            td {
                background: none;
                border: none;
                border-bottom: 1px solid #555;
            }
        }
    }

    .md-toc {
        padding: 0;
        margin: 1rem;
        max-width: 100%;

        &::before {
            display: block;
            position: relative;
            left: 0;
            margin-top: 1.75rem;
            margin-bottom: 0;
            padding: 0;
            background: none;
        }

        .md-toc-content {
            top: 0;
            left: 0;
            line-height: 1rem;

            .md-toc-h1 {
                margin-top: 2rem;
                font-size: 1rem;
            }

            .md-toc-h2 {
                font-size: 1rem;
            }

            .md-toc-h3 {
                display: none
            }
        }
    }

    .md-toc-inner {
        margin-left: 0;
    }
}

//ui for windows

:root {
    --blur-text-color: @theme-color;
    --active-file-bg-color: darken(@base-bg, 1%);
    /* 文件列表 当前文件激活 背景色*/
    --active-file-text-color: @theme-color;
    --active-file-border-color: @theme-color;
    /* 树形结构下文件激活边框色 */
    --side-bar-bg-color: darken(@base-bg, 5%);
    /*文件 大纲 侧边栏 背景色*/
    --item-hover-bg-color: var(--bg-color);
    /* 打开文文件夹、正文菜单、最近使用 hover 效果 */
    --item-hover-text-color: @theme-color;

    --primary-color: @theme-color;
    /* color of primary buttons */
    --primary-btn-border-color: @theme-color;
    --primary-btn-text-color: @base-bg;

    --select-text-bg-color: @theme-color;
    --select-text-font-color: @base-bg;
    --active-bg: darken(@base-bg, 5%);
    --window-border: var(--bg-color);
    --control-text-color: var(--title-color);
    --control-text-hover-color: var(--text-color);
}

//sidebar

.active-tab-files,
.active-tab-outline {
    .info-panel-tab {
        color: var(--active-file-text-color);
    }
}

.file-list-item:hover {
    background: var(--item-hover-bg-color);
    color: var(--item-hover-text-color);
}

.file-node-content:hover {
    background: var(--bg-color);
    color: var(--control-text-hover-color);
}

//serch-result
.ty-search-item-line {
    font-family: var(--base-font);
}

.ty-file-search-match-text {
    background: var(--codeb-bg);
}

/* 大纲目录自动编号 */

.sidebar-content {

    counter-reset: h1;
}

.outline-h1 {
    counter-increment: h1;
    counter-reset: h2;
}

.outline-h2 {
    counter-increment: h2;
    counter-reset: h3;
}

.outline-h3 {
    counter-increment: h3;
    counter-reset: h4;
}

.outline-h4 {
    counter-increment: h4;
    counter-reset: h5;
}

.outline-h5 {
    counter-increment: h5;
    counter-reset: h6;
}

.outline-h1>.outline-item>.outline-label:before {
    content: "章"counter(h1) " ";
}

.outline-h2>.outline-item>.outline-label:before {
    content: "节"counter(h2) " ";
}

.outline-h3>.outline-item>.outline-label:before {
    content: counter(h3) " ";
}

.outline-h4>.outline-item>.outline-label:before {
    content: counter(h3) "."counter(h4) " ";
}

.outline-h5>.outline-item>.outline-label:before {
    content: counter(h3) "."counter(h4) "."counter(h5) " ";
}

.outline-h6>.outline-item>.outline-label:before {
    counter-increment: h6;
    content: counter(h3) "."counter(h4) "."counter(h5) "."counter(h6) " ";
}

//meta
.md-meta {
    font-family: var(--monospace);
    color: var(--md-char-color);
}

//meta-left,meta-right

.md-expand .md-meta.md-before,
.md-expand .md-meta.md-after {
    padding-left: 5px;
    padding-right: 5px;
}

.md-image>.md-meta {
    padding-left: 0.5rem;
    padding-right: 0.5rem;
}

.md-image>img {
    margin-top: 2px;
}

.md-image>.md-meta:first-of-type:before {
    padding-left: 4px;
}

//context-menu



.dropdown-menu,
.context-menu.dropdown-menu>li>a:focus {
    background-color: var(--active-bg);
}

.context-menu.dropdown-menu>.active>a,
.context-menu.dropdown-menu>li>a:hover,
.menu-style-btn.active {
    color: var(--primary-color);
}

// source mode
#typora-source {
    background: var(--bg-color);
    color: var(--code-color);
    line-height: 1.5rem;
}

//control-menu

.context-menu.dropdown-menu>li>a:focus {
    background-color: var(--active-bg);
}

.context-menu.dropdown-menu>.active>a,
.context-menu.dropdown-menu>li>a:hover,
.menu-style-btn.active {
    color: var(--primary-color);
}

//megamenu

.megamenu-menu {
    box-shadow: 2px 2px 5px 0 #33333380, 2px 0px 10px 0 #33333380;
}

.megamenu-menu-list li {
    line-height: 48px;

    a {
        line-height: 48px;
        height: 48px;
    }
}

/* bugfix */
.megamenu-opened .megamenu-menu {
    left: -1px !important;
}

#megamenu-menu-list {
    background: #2f353a;
}

//megamenu-content

.megamenu-content {
    background: var(--bg-color) !important;
}

.megamenu-menu-panel {

    h1,
    h2 {
        margin: 2rem auto;
    }

    table tr {
        background: var(--bg-color);
    }

    tr:hover {
        background: darken(@base-bg, 5%);
        color: var(--primary-color) !important;
    }
}

#recent-file-panel tbody tr:nth-child(2n-1) {
    background-color: darken(@base-bg, 10%);
}

//theme-page

.theme-preview-div:hover {
    border-color: #80aaff80;
}

.theme-preview-div {
    border: 4px solid #99999950;
}

.theme-preview-div.active,
.theme-preview-div.active:hover {
    border-color: var(--primary-color);
}

//preference
.nav-group-item.active {
    background: var(--side-bar-bg-color) !important;
    color: @theme-color;
}

//about-page
table#typora-help-md-table tr {
    background: transparent;
}

.about-content-meta {
    font-family: var(--base-font);
}

//title
#top-titlebar,
#top-titlebar * {
    background-color: var(--bg-color);
    color: var(--text-color);
}

#top-titlebar {
    height: 28px;
    font-family: var(--base-font);
}

//scroll

::-webkit-scrollbar-corner {
    display: none;
    background: transparent;
}

::-webkit-scrollbar-thumb {
    background: rgba(0, 0, 0, 0.05);
    background-clip: padding-box;
}

[draggable] {
    cursor: pointer;
}

/* animation */

.long-btn {
    text-align: left;
}

#write td,
#megamenu-content td,
.file-list-item,
.megamenu-menu li,
.btn,
.long-btn {
    position: relative;
    overflow: hidden;
}

#write td:after,
#megamenu-content td:after,
.file-list-item:after,
.megamenu-menu li:after,
.btn:after,
.long-btn:after {
    content: "";
    display: block;
    position: absolute;
    width: 100%;
    height: 100%;
    top: 0;
    left: 0;
    pointer-events: none;
    background-image: radial-gradient(circle, #666 10%, transparent 10.01%);
    background-repeat: no-repeat;
    background-position: 50%;
    transform: scale(10, 10);
    opacity: 0;
    transition: transform .3s, opacity .5s;
}

#write td:active:after,
#megamenu-content td:active:after,
.file-list-item:active:after,
.megamenu-menu li:active:after,
.btn:active:after,
.long-btn:active:after {
    transform: scale(0, 0);
    opacity: .3;
    transition: 0s;
}

.md-image>.md-meta {
    color: var(--meta-content-color);
}

//fix
.unibody-window,
.ty-preferences .windows,
uni-preference-panel {
    font-family: var(--base-font);
}

/* 搜索与替换 */
#md-searchpanel.searchpanel-replace-mode {
    max-height: 80px;
}

.unibody-window #md-searchpanel .btn {
    line-height: 30px;
}